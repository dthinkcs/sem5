	AREA RESET,DATA,READONLY
	EXPORT __Vectors
	
__Vectors
    DCD 0x10001000
	DCD Reset_Handler
	
	AREA MYCODE,CODE,READONLY
	ENTRY 
	EXPORT Reset_Handler

Reset_Handler
	LDR R9, =num1
	LDR R10, =num2
	LDR R11, =res
	
	LDR R0, [R9],#04
	LDR R1, [R10],#04
	BL BCDSUB
	STR R3, [R11], #04
	
	
	LDR R0, [R9],#04
	LDR R1, [R10],#04
	BL BCDSUB
	STR R3, [R11], #04
	
	
	LDRH R0, [R9],#04
	LDRH R1, [R10],#04
	BL BCDSUB
	STR R3, [R11]
	B STOP
BCDSUB
	MOV R5, #00
	MOV R4, #08
	LDR R0, [R9]
	LDR R1, [R10]
UP	
	AND R7, R0, #0X0F
	AND R8, R1, #0X0F
	SUB R7, R7, R8 
	SUB R7, R5
	MOV R5, #00
	CMP R7, #0x0A
	BLO SKIP 
	SUB R7, #0XFFFFFFF6
	MOV R5, #01
SKIP 
	ROR R0, #04
	ROR R1, #04
	ORR R3,  R7
	ROR R3, #04
	
	SUB R4, #01
	TEQ R4, #00
	BNE UP
	BX LR
	
STOP B STOP
num1 DCD 0x66666666, 0x66666666, 0X6666
num2 DCD 0X12345678, 0X12345678, 0X1234
	AREA mycode, DATA, READWRITE
res DCD 0, 0, 0
	END